Got it ✅ — let’s do a clean version of your WorkspaceLayout.tsx that:

Uses the correct TeamTrack MaterialDashboardLayout

Includes all your intended workspace pages (CRM, VDR, Team, Assessments, plus Leads, Kanban, List, Calendar, Targets, Reports, Audit, Settings)

Falls back to CRMModule by default

Keeps the footer inside the layout

Here’s the updated file:

// client/src/pages/workspace/WorkspaceLayout.tsx

import React from "react";
import { Switch, Route } from "wouter";
import { useAdminAuth } from "@/hooks/use-admin-auth";
import { useTeamAuth } from "@/hooks/use-team-auth";
import AdminLoginPage from "@/pages/admin-login";

// Core modules
import CRMModule from "./CRMModule";
import VDRModule from "./VDRModule";
import TeamModule from "./TeamModule";
import AssessmentAdminModule from "./AssessmentAdminModule";

// Layout + footer
import MaterialDashboardLayout from "@/layouts/TeamTrack/MaterialDashboardLayout";
import { BuildFooter } from "@/components/Footer";

export default function WorkspaceLayout() {
  const { isAuthenticated: isAdminAuth, isLoading: adminLoading } = useAdminAuth();
  const { isAuthenticated: isTeamAuth,  isLoading: teamLoading }  = useTeamAuth();

  const isLoading = adminLoading || teamLoading;
  const hasWorkspaceAccess = isAdminAuth || isTeamAuth;

  if (isLoading) {
    return (
      <div style={{minHeight:"100vh",display:"flex",alignItems:"center",justifyContent:"center"}}>
        Loading workspace…
      </div>
    );
  }

  if (!hasWorkspaceAccess) return <AdminLoginPage />;

  return (
    <MaterialDashboardLayout>
      <Switch>
        {/* Core modules */}
        <Route path="/workspace/crm"         component={CRMModule} />
        <Route path="/workspace/vdr"         component={VDRModule} />
        <Route path="/workspace/team"        component={TeamModule} />
        <Route path="/workspace/assessments" component={AssessmentAdminModule} />

        {/* Top row navigation */}
        <Route path="/workspace/leads"       component={CRMModule} />
        <Route path="/workspace/kanban"      component={CRMModule} />
        <Route path="/workspace/list"        component={CRMModule} />
        <Route path="/workspace/calendar"    component={CRMModule} />
        <Route path="/workspace/targets"     component={CRMModule} />
        <Route path="/workspace/reports"     component={CRMModule} />

        {/* Admin only */}
        <Route path="/workspace/audit"       component={CRMModule} />
        <Route path="/workspace/settings"    component={CRMModule} />

        {/* Default fallback */}
        <Route><CRMModule /></Route>
      </Switch>
      <BuildFooter />
    </MaterialDashboardLayout>
  );
}


✅ This version guarantees:

We’re importing the TeamTrack sidebar layout

All workspace routes are covered

It’s safe for the ecosystem-modules branch (no changes to main)